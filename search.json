[
  {
    "objectID": "euro_final_scrollytelling_analysis.html",
    "href": "euro_final_scrollytelling_analysis.html",
    "title": "EURO 2024 Final Scrollytelling Analysis",
    "section": "",
    "text": "The “scrollytelling” technique can be a very interesting way to make soccer (or other sports) analysis more dynamic and interactive. In this document, we will attempt to tell a story using data from the EURO 2024 final between Spain and England and find all the keys to the match in a more entertaining way.\n\n\n\n\nimage: uefa.com\n\n\n\nIn this match, Spain achieved a last victory for the national team in a perfect tournament, with seven wins in seven matches (no national team had ever won all matches in the tournament), surpassing all the European teams that are World Champions at every round: Italy in the group stage, Germany in the quarter-finals, France in the semi-finals, and England in the final.\n\nMatch preview\nWe will analyze the main moments of the match, from the players who entered at the start to the most influential plays.\n\n\n\n\n\nTo start our analysis, let’s look at the line-ups of both teams, line by line.\n\n\n\n\nThe home team for the final is Spain. Luis De la Fuente chose a 1-4-2-3-1 formation in attack.\n\n\n\n\nIn goal, we have Unai Simon, the starting goalkeeper throughout the tournament, who arrived at the final having conceded only 3 goals in 5 matches, keeping a clean sheet in 2 group stage games.\n\n\n\n\nIn defense, although N. Fernández and J. Navas started in the semi-finals due to suspensions for Le Normand and Carvajal, the 4 starters for this line were able to take the field in the final.\n\n\n\n\nThe current Ballon d’Or winner, Rodri, accompanied by Fabián Ruiz, was the usual pairing in the Spanish midfield.\n\n\n\n\nIn attack, the quality is provided by two of the best young players today, Lamine Yamal and Nico Williams, along with Dani Olmo, who also had a great tournament. Up front, Morata does the dirty work.\n\n\n\n\nOn the English side, Gareth Southgate also used a 1-4-2-3-1 system.\n\n\n\n\nJordan Pickford is indisputable in goal. Notably, he made a decisive penalty save in the quarter-finals against Switzerland.\n\n\n\n\nIn defense, it was surprising to see Trippier playing on the left side throughout the tournament, but, unexpectedly, Southgate decided to align Luke Shaw in the final to try to contain Lamine Yamal. The rest of the defensive lineup were the same as in most previous matches.\n\n\n\n\nIn midfield, Rice was a fixture in all matches, and Mainoo earned his spot starting from the knockout rounds.\n\n\n\n\nFinally, in attack, the main English stars were not having a good tournament, including players with the quality of Bellingham and Kane.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFirst period summary\nThe final did not deviate from the expected script, starting with Luis de la Fuente’s Spain looking for the rival goal, while England was well protected, especially on the flanks, with Kyle Walker and Luke Shaw winning their individual duels against Nico Williams and Lamine Yamal, respectively. Without options on the outside, the Spanish national team also struggled to find solutions inside against a solid England that executed their game plan during the first forty-five minutes.\n\nSpain’s groundbreaking second period start\nIn the second half, everything changed in favor of Spain just a couple of minutes in. Let’s see it!\n\n\n\n\n\nIn the 47th minute, a great play by Lamine Yamal ended with a goal from Nico Williams to open the scoring.\n\n\n\n\nLet’s take a closer look at the play, as a series of supporting actors also deserve their share of the spotlight.\n\n\n\n\nIt all starts with an excellent first-touch pass from Carvajal to Yamal, surprising the English defense.\n\n\n\n\nAfter a good controlled touch by the FC Barcelona player, he began a run towards the rival area. As you can see, we’ve brought two more Spanish players into the scene. Now let’s see why.\n\n\n\n\nBoth Morata and Fabián Ruiz made runs into the area.\n\n\n\n\nThese movements did not help them receive the ball, but they did attract both Stones and Walker.\n\n\n\n\nThis created a passing zone for Nico Williams’s run into the area.\n\n\n\n\nLamine Yamal sees it and makes a precise pass into that zone.\n\n\n\n\nThe rest is history.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSecond period evolution insights\nFar from sitting back, Spain continued attacking and had clear chances to extend their lead. In fact, the total xG (Expected Goals) for this very interesting second half was 1.67 to 0.41.   xG is an advanced metric that indicates the probability of scoring based on prior characteristics of the shot, such as distance and angle to the goal or the part of the body used to shoot, among others.   Let’s see how the xG values evolved for both teams during the second half.\n\n\n\n\n\nAs we know, it all starts with 1-0 in favor of Spain. Nico’s goal had an xG of 0.1.\n\n\n\n\nShortly after, in the 49th minute, a long ball to Morata resulted in a clear chance missed by Olmo, with 0.54 xG. To give you an idea, chances are considered clear starting from about 0.3 xG.\n\n\n\n\nIn the 55th minute, Morata had two opportunities to score the second goal, one with 0.19 xG.\n\n\n\n\nThe first shot from the English side didn’t come until the 64th minute. After a good control, Bellingham shot from outside the area, but failed to find the goal of Unai Simon.\n\n\n\n\nSpain responded a minute later with another shot from Yamal that forced Pickford to work hard.\n\n\n\n\nAnd just when everything seemed to predict Spain’s second goal, a run down the right flank by Saka ended with a ball at the edge of the area for Palmer, who had just entered the field. With a precise shot, he leveled the score.   Let’s take this shot to explain another advanced metric.\n\n\n\n\nIf we focus on the two graphs below, we can see in the left graph where the shot was taken from, and if we hover over the point, we can read that the chance generated 0.04 xG. In the right graph, we see the area of the goal where the ball entered. If we hover over it, it tells us that the chance had 0.31 xGOT (Expected Goals On Target).   xGOT indicates the probability that the shot will result in a goal once we know characteristics after the shot, such as where it is aimed or its speed.\n\n\n\n\nIn other words, Palmer added a 27% of probabilities of scoring to that chance.\n\n\n\n\nThis goal did not discourage Spain, which continued trying, first with another chance from Yamal, again thwarted by Pickford.   Next, a great combination through the center ended with an opening to the left flank where Cucurella spotted a gap between the English center-backs and the English goalkeeper, delivering a perfect low cross to Oyarzabal, who did not miss. 2-1!\n\n\n\n\nBut the match was not over yet. In the 90th minute, a corner kick was awarded to England. They had up to three shots to equalize at the last moment.  First Rice, whose header was saved by Simon. Then Guehi, who caught the rebound, but his shot was cleared off the line by Olmo (who celebrated it as if it were a goal), and finally, again Rice, in a more awkward position, sent the ball wide, bringing the match to a close.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFinal thoughts\nSpain, which very few considered a candidate to win before the tournament began, lifted the EURO cup in Berlin. This was the fourth in their history, making them the team with the most European titles.\n\n\n\n\nimage: uefa.com\n\n\n\nWe hope you have enjoyed this different way of analyzing a soccer match and that this encourages you to use the Closeread library and build your own stories."
  },
  {
    "objectID": "code_explanation.html",
    "href": "code_explanation.html",
    "title": "Graphs Code Explanation",
    "section": "",
    "text": "In this section, we will explain the functions that have been implemented to create the graphs. All these functions are found in the file fct_viz.R.   Let’s start with the function create_formations_plot.\n\n\n\n\n\n\n\n\n\n\n\nThis function is used to draw a soccer pitch with the different players in formation.\n\n\n\n\nAs parameters, we need to pass the team data, the name of a team if we want to highlight it, the name of a position if we want to highlight the players in that position, and finally, whether we want to show a special image indicating that the graphs are interactive.\n\n\n\n\nWe create the tooltip content to add interactivity to the graph using ggiraph.\n\n\n\n\nWe draw the soccer pitch using the function create_simple_pitch.\n\n\n\n\nWe show the image hover_me.png if hover_img is TRUE.\n\n\n\n\nIn these lines, we choose which players to highlight and which not, depending on the received parameters.\n\n\n\n\nIf we have decided to highlight certain players, we highlight them using the alpha parameter.\n\n\n\n\nWe add a point for each player, colored according to their team.\n\n\n\n\nAnd the number that the player wears on their shirt.\n\n\n\n\nIf we do not want to highlight anyone, we paint all players equally.\n\n\n\n\nNow we add the flag and the name of each team on their side of the pitch.\n\n\n\n\nFinally, we add the title to the graph using the function add_plot_title and convert it to ggiraph format.\n\n\n\n\n\n\n\ncreate_formations_plot &lt;- function(data, highlighted_team = NULL, highlighted_position = NULL, hover_img = F){\n  data$tooltip &lt;- c(data$player_name)\n  \n  p &lt;- create_simple_pitch(grass_colour = \"#e2f2e9\", \n                           background_colour = \"#e2f2e9\", \n                           line_colour = \"black\")\n  \n  if(hover_img){\n    p &lt;- p +\n      geom_image(data = data, \n                 mapping = aes(x = 40, y = 90, \n                               image = \"images/hover_me.png\"),\n                 size = 0.5)\n  }\n  \n  if(!is.null(highlighted_team) & !is.null(highlighted_position)){\n    hl_data &lt;- data %&gt;% filter(team_name == highlighted_team,\n                               player_position == highlighted_position)\n    nhl_data &lt;- bind_rows(data %&gt;% filter(team_name == highlighted_team,\n                                          player_position != highlighted_position),\n                          data %&gt;% filter(team_name != highlighted_team))\n  }\n  else if(is.null(highlighted_team) & !is.null(highlighted_position)){\n    hl_data &lt;- data %&gt;% filter(player_position == highlighted_position)\n    nhl_data &lt;- data %&gt;% filter(player_position != highlighted_position)\n  }\n  else if(!is.null(highlighted_team) & is.null(highlighted_position)){\n    hl_data &lt;- data %&gt;% filter(team_name == highlighted_team)\n    nhl_data &lt;- data %&gt;% filter(team_name != highlighted_team)\n  }\n  \n  [...]\n}\n\n\n\n\ncreate_formations_plot &lt;- function(data, highlighted_team = NULL, highlighted_position = NULL, hover_img = F){\n  \n  [...]\n  \n  if(!is.null(highlighted_team) | !is.null(highlighted_position)){\n    p &lt;- p +\n      geom_point_interactive(data = hl_data, \n                             mapping = aes(x = x, y = y,\n                                           tooltip = tooltip, data_id = id,\n                                           color = team_name, fill = team_name\n                             ),\n                             alpha = 1,\n                             shape = 21, \n                             size = 8,\n                             stroke = 1.5) +\n      geom_text(data = hl_data, \n                mapping = aes(x = x, y = y, \n                              label = player_number),\n                alpha = 1,\n                size = 4,\n                family = \"Exo 2\",\n                fontface = \"bold\",\n                color = ifelse(hl_data$team_name == \"England\", \"#CD2626\", \"#FFD700\")) +\n      geom_point_interactive(data = nhl_data, \n                             mapping = aes(x = x, y = y,\n                                           tooltip = tooltip, data_id = id,\n                                           color = team_name, fill = team_name\n                             ),\n                             alpha = 0.1,\n                             shape = 21, \n                             size = 8,\n                             stroke = 1.5) +\n      geom_text(data = nhl_data, \n                mapping = aes(x = x, y = y, \n                              label = player_number),\n                alpha = 0.1,\n                size = 4,\n                family = \"Exo 2\",\n                fontface = \"bold\",\n                color = ifelse(nhl_data$team_name == \"England\", \"#CD2626\", \"#FFD700\")) +\n      scale_color_manual_interactive(values = c(\"Spain\" = \"#104E8B\", \"England\" = \"#27408B\")) +\n      scale_fill_manual_interactive(values = c(\"Spain\" = \"#FF0000\", \"England\" = \"#FFFFFF\"))\n  }\n  \n  [...]\n}\n\n\n\n\ncreate_formations_plot &lt;- function(data, highlighted_team = NULL, highlighted_position = NULL, hover_img = F){\n  \n  [...]\n\n  else{\n    p &lt;- p +\n      geom_point_interactive(data = data, \n                             mapping = aes(x = x, y = y,\n                                           tooltip = tooltip, data_id = tooltip,\n                                           color = team_name, fill = team_name\n                             ),\n                             shape = 21, \n                             size = 8,\n                             stroke = 1.5) +\n      geom_text(data = data, \n                mapping = aes(x = x, y = y, \n                              label = player_number),\n                size = 4,\n                family = \"Exo 2\",\n                fontface = \"bold\",\n                color = ifelse(data$team_name == \"England\", \"#CD2626\", \"#FFD700\")) +\n      scale_color_manual_interactive(values = c(\"Spain\" = \"#104E8B\", \"England\" = \"#27408B\")) +\n      scale_fill_manual_interactive(values = c(\"Spain\" = \"#FF0000\", \"England\" = \"#FFFFFF\")) \n  }\n  \n  [...]\n}\n\n\n\n\ncreate_formations_plot &lt;- function(data, highlighted_team = NULL, highlighted_position = NULL, hover_img = F){\n  \n  [...]\n\n  p &lt;- p +\n    geom_image(data = data, \n               mapping = aes(x = 5, y = 94, \n                             image = \"images/ESP.png\"),\n               size = 0.07) +\n    geom_image(data = data, \n               mapping = aes(x = 95, y = 94, \n                             image = \"images/ENG.png\"),\n               size = 0.07) +\n    geom_text(data = data, \n              mapping = aes(x = 18, y = 94, \n                            label = \"SPAIN\"),\n              size = 7,\n              family = \"Exo 2\",\n              color = \"#EE0000\") +\n    geom_text(data = data, \n              mapping = aes(x = 78, y = 94, \n                            label = \"ENGLAND\"),\n              size = 7,\n              family = \"Exo 2\",\n              color = \"#27408B\") +\n    guides(color = \"none\",\n           fill = \"none\")\n  \n  g &lt;- girafe(ggobj = add_plot_title(p, \" EURO 2024 Final\"),\n              width_svg = 7,\n              height_svg = 6,\n              options = list(\n                opts_toolbar(\n                  hidden = c(\"lasso_select\", \"lasso_deselect\", \"zoom_onoff\",\n                             \"zoom_rect\", \"zoom_reset\", \"saveaspng\"\n                  )\n                ),\n                opts_sizing(rescale = F),\n                opts_tooltip(use_fill = T,\n                             css = paste0(\"font-family: Exo 2; padding:3pt; color:#000080; border-radius:5px\")\n                ),\n                opts_hover(css = \"stroke:black;stroke-width:3px;\")\n              )\n  )\n  \n  return(g)\n}\n\n\n\n\n\n\nNow let’s look at the function create_goal_sequence_plot. With this function, we draw a soccer pitch again, on which we will represent the players and certain events of the match such as passes, shots, or movements.\n\n\n\n\n\n\n\n\n\n\n\nWe need to pass the event data to this function, and we also have the option to highlight areas of the pitch in rectangle format c(xmin, ymin, xmax, ymax).\n\n\n\n\nWe create the tooltip content to add interactivity to the graph using ggiraph.\n\n\n\n\nWe draw the soccer pitch using the function create_simple_pitch.\n\n\n\n\nIf a zone to highlight has been specified, we paint it.\n\n\n\n\nThe events of shots, passes, dribbles, and runs are represented with arrows that change shape and color according to the type of event and the team.\n\n\n\n\nThe players are represented on the pitch just like in the create_formation_plot function.\n\n\n\n\nFinally, we add the title to the graph using the function add_plot_title and convert it to ggiraph format.\n\n\n\n\n\n\n\ncreate_goal_sequence_plot &lt;- function(data, rect_points = NULL){\n  data$tooltip &lt;- c(data$player_name)\n  \n  p &lt;- create_simple_pitch(grass_colour = \"#e2f2e9\", \n                           background_colour = \"#e2f2e9\", \n                           line_colour = \"black\")\n  \n  if(length(rect_points) == 4){\n    p &lt;- p +\n      geom_rect(aes(xmin = rect_points[[1]], xmax = rect_points[[2]], \n                    ymin = rect_points[[3]], ymax = rect_points[[4]]),\n                fill = \"#FF0000\",\n                alpha = 0.3)\n  }\n  \n  [...]\n}\n\n\n\n\ncreate_goal_sequence_plot &lt;- function(data, rect_points = NULL){\n  \n  [...]\n  \n  p &lt;- p +\n    geom_segment(data = data %&gt;% filter(event_type %in% c(\"Pass\", \"Carry\", \"Shot\")),\n                 mapping = aes(x = x, y = y,\n                               xend = x_end, yend = y_end),\n                 color = ifelse((data %&gt;% filter(event_type %in% c(\"Pass\", \"Carry\", \"Shot\")))$team_name == \"England\", \"#27408B\", \"#104E8B\"),\n                 linetype = ifelse((data %&gt;% filter(event_type %in% c(\"Pass\", \"Carry\", \"Shot\")))$event_type %in% c(\"Pass\", \"Shot\"), 1, 2),\n                 arrow = arrow(length = unit(0.2, \"cm\"), type = \"closed\")) +\n    geom_segment(data = data %&gt;% filter(event_type == \"LoseMarker\"),\n                 mapping = aes(x = x, y = y,\n                               xend = x_end, yend = y_end),\n                 color = ifelse((data %&gt;% filter(event_type == \"LoseMarker\"))$team_name == \"England\", \"#CD2626\", \"#FF0000\"),\n                 linetype = 3,\n                 linewidth = 0.5,\n                 arrow = arrow(length = unit(0.2, \"cm\"), type = \"closed\")) +\n    geom_point_interactive(data = data %&gt;% filter(event_type == \"PlayerPos\"), \n                           mapping = aes(x = x, y = y,\n                                         tooltip = tooltip, data_id = tooltip,\n                                         color = team_name, fill = team_name\n                           ),\n                           shape = 21, \n                           size = 8,\n                           stroke = 1.5) +\n    geom_text(data = data %&gt;% filter(event_type == \"PlayerPos\"), \n              mapping = aes(x = x, y = y, \n                            label = player_number),\n              size = 4,\n              family = \"Exo 2\",\n              fontface = \"bold\",\n              color = ifelse((data %&gt;% filter(event_type == \"PlayerPos\"))$team_name == \"England\", \"#CD2626\", \"#FFD700\")) +\n    scale_color_manual_interactive(values = c(\"Spain\" = \"#104E8B\", \"England\" = \"#27408B\")) +\n    scale_fill_manual_interactive(values = c(\"Spain\" = \"#FF0000\", \"England\" = \"#FFFFFF\"))  +\n    guides(color = \"none\",\n           fill = \"none\")\n  \n  g &lt;- girafe(ggobj = add_plot_title(p, \" EURO 2024 Final\"),\n              width_svg = 7,\n              height_svg = 6,\n              options = list(\n                opts_toolbar(\n                  hidden = c(\"lasso_select\", \"lasso_deselect\", \"zoom_onoff\",\n                             \"zoom_rect\", \"zoom_reset\", \"saveaspng\"\n                  )\n                ),\n                opts_sizing(rescale = F),\n                opts_tooltip(use_fill = T,\n                             css = paste0(\"font-family: Exo 2; padding:3pt; color:#000080; border-radius:5px\")\n                ),\n                opts_hover(css = \"stroke:black;stroke-width:3px;\")\n              )\n  )\n  \n  return(g)\n}\n\n\n\n\n\n\nLastly, let’s explain the shot dashboard. It is the most complex composition, as it consists of a set of multiple graphs using the patchwork package. It is very interesting to see how they all evolve together and how the interactivity is synchronized among all of them.\n\n\n\n\n\n\n\nThe code is divided into a function for each graph and a function that combines them all.\n\n\n\n\n\nWe start with the function that creates the xG evolution graph.   \n\n\n\n\nFor this function, we only need to pass the shot event data as parameters.\n\n\n\n\nWe create the id and tooltip content to add interactivity to the graph using ggiraph.\n\n\n\n\nWe create the lines for each team of the total xG at each minute in a stepped type format.\n\n\n\n\nWe add a vertical line at the moment each goal, accompanied by an image of a small ball and the match score.\n\n\n\n\nNext, we move on to the function that creates the shot map.   \n\n\n\n\nWe pass the shot event data to this function and indicate if we want to highlight any (row number of the shot).\n\n\n\n\nWe create the id and tooltip content to add interactivity to the graph using ggiraph.\n\n\n\n\nWe adjust the coordinates of the shots (necessary because the data provider uses a different coordinate system).\n\n\n\n\nWe create the pitch, flip it, and limit it to view only half the pitch.\n\n\n\n\nWe add points from where the shots were taken. The shape changes depending on whether it is a goal, and the color according to the team. Additionally, we check if we only need to highlight a specific shot.\n\n\n\n\nNow we go to the function to create the goalmouth map.   \n\n\n\n\nWe pass the shot event data to this function and indicate if we want to highlight any (row number of the shot).\n\n\n\n\nIn these lines, we draw the goal and the pitch line, and delimit the graph.\n\n\n\n\nWe create the id and tooltip content to add interactivity to the graph using ggiraph.\n\n\n\n\nHere, we also adjust the coordinates of the shots.\n\n\n\n\nWe add the points where the shots were directed. The shape changes depending on whether it is a goal, and the color according to the team. Additionally, we check if we only need to highlight a specific shot.\n\n\n\n\nAnd we finish with the function that does the magic of combining and synchronizing everything.\n\n\n\n\nThis function needs the shot event data as parameters and indicates if we want to highlight any (row number of the shot).\n\n\n\n\nFirst, we select the layout for the graphs.\n\n\n\n\nWe add the title with the function add_plot_title, create the graphs, and unite them using patchwork.\n\n\n\n\nWe convert it to ggiraph format. Remember that it is necessary for the data taken by the graphs to have the same data-id for the interactivity to be synchronized.\n\n\n\n\n\n\n\ncreate_xg_evolution_plot &lt;- function(data){\n  data$id &lt;- rownames(data)\n  data$tooltip &lt;- c(paste0(data$minute, \"' \", data$player_name, \"\\n \", \n                           \"xG: \", data$xG))\n  \n  p &lt;- ggplot(data) +\n    geom_step(aes(minute, xG_accum, color = team_name), \n              linewidth = 1) +\n    geom_vline_interactive(data = data %&gt;% filter(is_goal), \n                           aes(xintercept = minute, \n                               color = team_name,\n                               tooltip = tooltip, data_id = id), \n                           linetype = \"dashed\", alpha = 0.3, linewidth = 0.6) +\n    scale_color_manual(values = c(\"Spain\" = \"#FF0000\", \"England\" = \"#27408B\")) +\n    geom_image(data = data %&gt;% \n                 filter(is_goal), \n               aes(x = minute, y = 1.8, image = \"images/soccer-ball.png\"), \n               asp = 3, size = .012) +\n    geom_text(data = data %&gt;% \n                filter(is_goal), \n              mapping = aes(x = minute + 1.3, y = 1.8,  label = result),\n              size = 3, family = \"Exo 2\", fontface = \"bold\",\n              color = ifelse((data %&gt;% filter(is_goal))$team_name == \"England\", \"#27408B\", \"#FF0000\")) +\n    geom_text(data = tail(data, 2) %&gt;% filter(team_name == \"Spain\"), \n              mapping = aes(x = minute, y = xG_accum + 0.05,label = paste0(\"SPA: \", xG_accum)),\n              size = 3.5, family = \"Exo 2\", fontface = \"bold\", color = \"#FF0000\") +\n    geom_text(data = tail(data, 2) %&gt;% filter(team_name == \"England\"), \n              mapping = aes(x = minute, y = xG_accum + 0.05, label = paste0(\"ENG: \", xG_accum)),\n              size = 3.5, family = \"Exo 2\", fontface = \"bold\", color = \"#27408B\") +\n    labs(x = \"Minute\",\n         y = \"Total xG\") +\n    scale_x_continuous(limits = c(45, 90),breaks = seq(45, 90, 5)) +\n    ylim(0, 1.8) +\n    theme_minimal() +\n    theme(text = element_text(family = \"Exo 2\"),\n          plot.background = element_rect(color = \"#e2f2e9\", fill = \"#e2f2e9\"),\n          panel.background = element_rect(color = \"#e2f2e9\", fill = \"#e2f2e9\"),\n          panel.grid.major = element_line(color = \"#8FBC8F\",\n                                          linewidth = 0.1),\n          panel.grid.minor = element_blank()) +\n    guides(color = \"none\")\n  \n  return(p)\n}\n\n\n\n\ncreate_shotmap &lt;- function(data, highlight = NULL){  \n  data$id &lt;- rownames(data)\n  data$tooltip &lt;- c(paste0(data$minute, \"' \", data$player_name, \"\\n \", \n                           \"xG: \", data$xG))\n  \n  data &lt;- data %&gt;% \n    mutate(is_goal = ifelse(is_goal, \"Goal\", \"No goal\"),\n           x = x/1.05,\n           y = 100-(y/0.68)) %&gt;% \n    filter(!is.na(xG))\n  \n  p &lt;- create_simple_pitch(grass_colour = \"#e2f2e9\", \n                           background_colour = \"#e2f2e9\", \n                           line_colour = \"black\")\n  \n  p &lt;- p +\n    coord_flip(xlim = c(52.2, 99.5), ylim = c(4.4, 95.6))\n  \n  if(is.null(highlight)){\n    p &lt;- p +\n      geom_point_interactive(data = data %&gt;% filter(is_goal == \"Goal\"),\n                             aes(x = x, y = y, \n                                 color = team_name, fill = team_name,\n                                 tooltip = tooltip, data_id = id),\n                             size = 5, alpha = 0.7, shape = \"\\u2605\") +\n      geom_point_interactive(data = data %&gt;% filter(is_goal == \"No goal\"),\n                             aes(x = x, y = y, \n                                 color = team_name, fill = team_name,\n                                 tooltip = tooltip, data_id = id),\n                             size = 4, alpha = 0.7)\n  }\n  else{\n    p &lt;- p +\n      geom_point_interactive(data = data[highlight,] %&gt;% \n                               filter(is_goal == \"Goal\"),\n                             aes(x = x, y = y, \n                                 color = team_name, fill = team_name,\n                                 tooltip = tooltip, data_id = id),\n                             size = 5, alpha = 0.9, shape = \"\\u2605\") +\n      geom_point_interactive(data = data[highlight,] %&gt;% filter(is_goal == \"No goal\"),\n                             aes(x = x, y = y, \n                                 color = team_name, fill = team_name,\n                                 tooltip = tooltip, data_id = id),\n                             size = 4, alpha = 0.9)\n  }\n  \n  [...]\n}\n\n\n\n\ncreate_goalmouth_map &lt;- function(data, highlight = NULL){\n  p &lt;- ggplot() +\n    annotate(\"rect\", xmin = 54.8, xmax = 55.3, ymin = 0, ymax = 2.2, fill = \"white\") +\n    annotate(\"rect\", xmin = 45.2, xmax = 44.7, ymin = 0, ymax = 2.2, fill = \"white\") +\n    annotate(\"rect\", xmin = 44.7, xmax = 55.3, ymin = 2, ymax = 2.2, fill = \"white\") +\n    geom_segment(aes(x = -Inf, y = 0, xend = Inf, yend = 0), color = \"black\", linewidth = 0.6) +\n    geom_segment(aes(x = 55.3, y = 2.2, xend = 44.7, yend = 2.2), color = \"black\", linewidth = 0.6) +\n    geom_segment(aes(x = 54.8, y = 2, xend = 45.2, yend = 2), color = \"black\", linewidth = 0.6) +\n    geom_segment(aes(x = 55.3, y = 0, xend = 55.3, yend = 2.2), color = \"black\", linewidth = 0.6) +\n    geom_segment(aes(x = 54.8, y = 0, xend = 54.8, yend = 2), color = \"black\", linewidth = 0.6) +\n    geom_segment(aes(x = 45.2, y = 0, xend = 45.2, yend = 2), color = \"black\", linewidth = 0.6) +\n    geom_segment(aes(x = 44.7, y = 0, xend = 44.7, yend = 2.2), color = \"black\", linewidth = 0.6) +\n    scale_x_reverse() +\n    theme(plot.background = element_blank(),\n          panel.background = element_blank(),\n          panel.grid.major = element_blank(),\n          panel.grid.minor = element_blank(),\n          axis.ticks = element_blank(),\n          axis.text = element_blank(),\n          axis.title = element_blank()) +\n    xlim(61, 39) +\n    ylim(-1, 6)\n  \n  [...]\n}\n\n\n\n\ncreate_goalmouth_map &lt;- function(data, highlight = NULL){\n  \n  [...]\n  \n  data$id &lt;- rownames(data)\n  data$tooltip &lt;- c(paste0(data$minute, \"' \", data$player_name, \"\\n \", \n                           \"xGOT: \", data$xGOT))\n  \n  data &lt;- data %&gt;% \n    mutate(is_goal = ifelse(is_goal, \"Goal\", \"No goal\"),\n           g_y = g_y/0.68, \n           g_z = g_z) %&gt;% \n    filter(!is.na(xGOT))\n  \n  if(is.null(highlight)){\n    p &lt;- p +\n      geom_point_interactive(data = data %&gt;% filter(is_goal == \"Goal\"),\n                             aes(x = g_y, y = g_z, \n                                 color = team_name, fill = team_name,\n                                 tooltip = tooltip, data_id = id),\n                             size = 6, alpha = 0.7, shape = \"\\u2605\") +\n      geom_point_interactive(data = data %&gt;% filter(is_goal == \"No goal\"),\n                             aes(x = g_y, y = g_z, \n                                 color = team_name, fill = team_name,\n                                 tooltip = tooltip, data_id = id),\n                             size = 5, alpha = 0.7) \n  }\n  else{\n    p &lt;- p +\n      geom_point_interactive(data = data[highlight,] %&gt;% \n                               filter(is_goal == \"Goal\"),\n                             aes(x = g_y, y = g_z, \n                                 color = team_name, fill = team_name,\n                                 tooltip = tooltip data_id = id),\n                             size = 6, alpha = 0.9, shape = \"\\u2605\") +\n      geom_point_interactive(data = data[highlight,] %&gt;% \n                               filter(is_goal == \"No goal\"),\n                             aes(x = g_y, y = g_z, \n                                 color = team_name, fill = team_name,\n                                 tooltip = tooltip, data_id = id),\n                             size = 5, alpha = 0.9) \n  }\n  \n  [...]\n}\n\n\n\n\ncreate_shot_dashboard &lt;- function(data, highlight = NULL){\n  layout &lt;- \"AAAAA\n  BBBCC\"\n  \n  g &lt;- girafe(ggobj = add_plot_title(create_xg_evolution_plot(data), \" EURO 2024 Final\", margin(0, 0, 10, 0)) / \n                create_shotmap(data, highlight) +\n                create_goalmouth_map(data, highlight) + \n                plot_layout(heights = c(1.5, 1), design = layout) & \n                plot_annotation(theme = theme(plot.background = element_rect(color = \"#e2f2e9\", fill = \"#e2f2e9\"), \n                                              panel.background = element_rect(color = \"#e2f2e9\", fill = \"#e2f2e9\"))),\n              width_svg = 10,\n              height_svg = 8,\n              options = list(\n                opts_toolbar(\n                  hidden = c(\"lasso_select\", \"lasso_deselect\", \"zoom_onoff\",\n                             \"zoom_rect\", \"zoom_reset\", \"saveaspng\"\n                  )\n                ),\n                opts_sizing(rescale = F),\n                opts_tooltip(use_fill = T,\n                             css = paste0(\"font-family: Exo 2; padding:3pt; color:#ffffff; border-radius:5px\")\n                ),\n                opts_hover(css = \"stroke:black;stroke-width:1px;\"),\n                opts_hover_inv(css = \"opacity:0.2;\")\n              )\n  )\n  \n  return(g)\n}"
  },
  {
    "objectID": "euro_final_scrollytelling_analysis.html#match-preview",
    "href": "euro_final_scrollytelling_analysis.html#match-preview",
    "title": "EURO 2024 Final Scrollytelling Analysis",
    "section": "Match preview",
    "text": "Match preview\nIn this match, Spain achieved a last victory for the national team in a perfect tournament, with seven wins in seven matches (no national team had ever won all matches in the tournament), surpassing all the European teams that are World Champions at every round: Italy in the group stage, Germany in the quarter-finals, France in the semi-finals, and England in the final.\n\n\n\n\n\nTo start our analysis, let’s look at the line-ups of both teams, line by line.\n\n\n\n\nThe home team for the final is Spain. Luis De la Fuente chose a 1-4-2-3-1 formation in attack.\n\n\n\n\nIn goal, we have Unai Simon, the starting goalkeeper throughout the tournament, who arrived at the final having conceded only 3 goals in 5 matches, keeping a clean sheet in 2 group stage games.\n\n\n\n\nIn defense, although N. Fernández and J. Navas started in the semi-finals due to suspensions for Le Normand and Carvajal, the 4 starters for this line were able to take the field in the final.\n\n\n\n\nThe current Ballon d’Or winner, Rodri, accompanied by Fabián Ruiz, was the usual pairing in the Spanish midfield.\n\n\n\n\nIn attack, the quality is provided by two of the best young players today, Lamine Yamal and Nico Williams, along with Dani Olmo, who also had a great tournament. Up front, Morata does the dirty work.\n\n\n\n\nOn the English side, Gareth Southgate also used a 1-4-2-3-1 system.\n\n\n\n\nJordan Pickford is indisputable in goal. Notably, he made a decisive penalty save in the quarter-finals against Switzerland.\n\n\n\n\nIn defense, it was surprising to see Trippier playing on the left side throughout the tournament, but, unexpectedly, Southgate decided to align Luke Shaw in the final to try to contain Lamine Yamal. The rest of the defensive lineup were the same as in most previous matches.\n\n\n\n\nIn midfield, Rice was a fixture in all matches, and Mainoo earned his spot starting from the knockout rounds.\n\n\n\n\nFinally, in attack, the main English stars were not having a good tournament, including players with the quality of Bellingham and Kane.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThe final did not deviate from the expected script, starting with Luis de la Fuente’s Spain looking for the rival goal, while England was well protected, especially on the flanks, with Kyle Walker and Luke Shaw winning their individual duels against Nico Williams and Lamine Yamal, respectively. Without options on the outside, the Spanish national team also struggled to find solutions inside against a solid England that executed their game plan during the first forty-five minutes.   In the second half, everything changed in favor of Spain just a couple of minutes in.\n\n\n\n\n\nIn the 47th minute, a great play by Lamine Yamal ended with a goal from Nico Williams to open the scoring.\n\n\n\n\nLet’s take a closer look at the play, as a series of supporting actors also deserve their share of the spotlight.\n\n\n\n\nIt all starts with an excellent first-touch pass from Carvajal to Yamal, surprising the English defense.\n\n\n\n\nAfter a good controlled touch by the FC Barcelona player, he began a run towards the rival area. As you can see, we’ve brought two more Spanish players into the scene. Now let’s see why.\n\n\n\n\nBoth Morata and Fabián Ruiz made runs into the area.\n\n\n\n\nThese movements did not help them receive the ball, but they did attract both Stones and Walker.\n\n\n\n\nThis created a passing zone for Nico Williams’s run into the area.\n\n\n\n\nLamine Yamal sees it and makes a precise pass into that zone.\n\n\n\n\nThe rest is history.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFar from sitting back, Spain continued attacking and had clear chances to extend their lead. In fact, the total xG (Expected Goals) for this very interesting second half was 1.67 to 0.41.   xG is an advanced metric that indicates the probability of scoring based on prior characteristics of the shot, such as distance and angle to the goal or the part of the body used to shoot, among others.   Let’s see how the xG values evolved for both teams during the second half.\n\n\n\n\n\nAs we know, it all starts with 1-0 in favor of Spain. Nico’s goal had an xG of 0.1.\n\n\n\n\nShortly after, in the 49th minute, a long ball to Morata resulted in a clear chance missed by Olmo, with 0.54 xG. To give you an idea, chances are considered clear starting from about 0.3 xG.\n\n\n\n\nIn the 55th minute, Morata had two opportunities to score the second goal, one with 0.19 xG.\n\n\n\n\nThe first shot from the English side didn’t come until the 64th minute. After a good control, Bellingham shot from outside the area, but failed to find the goal of Unai Simon.\n\n\n\n\nSpain responded a minute later with another shot from Yamal that forced Pickford to work hard.\n\n\n\n\nAnd just when everything seemed to predict Spain’s second goal, a run down the right flank by Saka ended with a ball at the edge of the area for Palmer, who had just entered the field. With a precise shot, he leveled the score.   Let’s take this shot to explain another advanced metric.\n\n\n\n\nIf we focus on the two graphs below, we can see in the left graph where the shot was taken from, and if we hover over the point, we can read that the chance generated 0.04 xG. In the right graph, we see the area of the goal where the ball entered. If we hover over it, it tells us that the chance had 0.31 xGOT (Expected Goals On Target).   xGOT indicates the probability that the shot will result in a goal once we know characteristics after the shot, such as where it is aimed or its speed.\n\n\n\n\nIn other words, Palmer added a 27% of probabilities of scoring to that chance.\n\n\n\n\nThis goal did not discourage Spain, which continued trying, first with another chance from Yamal, again thwarted by Pickford.   Next, a great combination through the center ended with an opening to the left flank where Cucurella spotted a gap between the English center-backs and the English goalkeeper, delivering a perfect low cross to Oyarzabal, who did not miss. 2-1!\n\n\n\n\nBut the match was not over yet. In the 90th minute, a corner kick was awarded to England. They had up to three shots to equalize at the last moment.  First Rice, whose header was saved by Simon. Then Guehi, who caught the rebound, but his shot was cleared off the line by Olmo (who celebrated it as if it were a goal), and finally, again Rice, in a more awkward position, sent the ball wide, bringing the match to a close.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSpain, which very few considered a candidate to win before the tournament began, lifted the EURO cup in Berlin. This was the fourth in their history, making them the team with the most European titles.\n\n\n\n\nimage: uefa.com"
  }
]